<!DOCTYPE html><html><head><meta charset=utf-8><title></title><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css integrity=sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ crossorigin=anonymous><style>.boarder{border-style:solid;border-color:#f00 #f00 #f00 #f00;min-height:50px}</style></head><body style="position: absolute; width: 96%; margin: 10px;"><form id=chat onsubmit="return doSend();"><input type=button value=Connectar onclick=start()><br><input type=text id=txt required="" placeholder="Escreva sua mensagem"><input type=submit value=Enviar><input type=button value=sair onclick=closeSocket()></form><div class=row><div class=col-sm-6><div id=output style="max-height: 300px; overflow-x: auto;"></div></div><div class=col-sm-6><img border=0 id=peca draggable ondragstart=drag(event) alt="My Peca" src=https://www.iconeasy.com/icon/ico/System/Kids%20Icons/X.ico width=50 height=50><img border=0 id=adversario draggable=false alt=Adversario src=https://www.huntoffice.ie/images/T/franken-m861-03.jpg width=50 height=50><div class=row id=row><div class="col-md-4 boarder" position=1></div><div class="col-md-4 boarder" position=2></div><div class="col-md-4 boarder" position=3></div></div><div class=row><div class="col-md-4 boarder" position=4></div><div class="col-md-4 boarder" position=5></div><div class="col-md-4 boarder" position=6></div></div><div class=row><div class="col-md-4 boarder" position=7></div><div class="col-md-4 boarder" position=8></div><div class="col-md-4 boarder" position=9></div></div></div></div><script src=https://code.jquery.com/jquery-3.1.1.slim.min.js integrity=sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js integrity=sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb crossorigin=anonymous></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js integrity=sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn crossorigin=anonymous></script><script language=javascript>function write(n,t){var i=document.createElement("p");i.innerHTML=n;i.style.color=t;output.appendChild(i)}function start(){window.chatSocket=new WebSocket(uri);chatSocket.onopen=function(){write("chat is opened "+uri)};chatSocket.onclose=function(){write("closed","black")};chatSocket.onmessage=function(n){write("Received: "+n.data,"red")};chatSocket.onerror=function(n){write("Error: "+n.data)};tabSocket=new WebSocket(uriTab);tabSocket.onopen=function(n){write("tab is opened "+uriTab);console.log(n)};tabSocket.onclose=function(){write("tab is closed","black")};tabSocket.onmessage=remoteDrag;tabSocket.onerror=function(n){write("tab with Error: "+n.data)}}function doSend(){return write("Sending: "+txt.value,"green"),chatSocket.send(txt.value),!1}function closeSocket(){window.chatSocket.close(1e3,"Saindo")}function onInit(){output=document.getElementById("output");peca=document.querySelector(dragableSelector);adversario=document.querySelector(adversarioSelector)}function allowDrop(n){n.preventDefault()}function drag(n){var t=n.target.parentElement,i=t.getAttribute(positionAtrribute);n.dataTransfer.setData(positionAtrribute,i)}function drop(n){n.preventDefault();peca.draggable=!1;n.target.appendChild(peca.cloneNode());var t=n.target.getAttribute(positionAtrribute);tabSocket.send(t)}function remoteDrag(n){var t=document.querySelector("div["+positionAtrribute+"='"+n.data+"']");t.appendChild(adversario.cloneNode());peca.draggable=!0}var chatSocket,tabSocket,uri="ws://"+window.location.host+"/ws/chat/",uriTab="ws://"+window.location.host+"/ws/tab/",output,peca,adversario,positionAtrribute="position",dragableSelector="#peca",adversarioSelector="#adversario";$("div[position]").on("drop",drop);$("div[position]").on("dragover",allowDrop);window.onload=onInit</script></body></html>